# 기능 확장 기획서

## ⚙️ 1. 전투 시스템 확장

**① 체력(HP) 시스템**

* 플레이어: `player.hp`, `player.maxHp` 추가
  → 피격 시 HP 감소, 0이면 `gameOver` 상태 전환
* 적: `enemy.hp` 속성 추가
  → 일반 적은 1~3, 보스는 100 이상 등 단계적 설정
* 시각화: HP바 (canvas 상단 혹은 적 위쪽에 표시)

**② 공격 시스템**

* 기본 단발 → 다중탄(`spread`), 강화탄(`powerShot`) 추가
* 공격속도(`fireRate`) 조정 기능

  * 기본값 예: 300ms
  * 아이템 효과나 레벨업 시 150ms 등으로 단축
* 연사 제한: `lastFireTime`으로 발사 쿨타임 관리

**③ 피격 판정 및 무적시간**

* 피격 시 일정 시간(`invincibleTime`) 동안 무적
* 시각 효과(깜빡임)로 무적 표시

---

## 🎯 2. 적 AI 및 패턴 시스템

**① 스폰 패턴 다양화**

* 단순 랜덤 생성 → **패턴 기반 스폰**
  예:

  * 일렬 대형
  * 좌우 대칭 진입
  * 랜덤 워프 등장
* `spawnPattern` 배열에 미리 정의된 경로로 등장 가능

**② 이동 AI**

* 직선 하강 → 곡선/지그재그 이동
  → `sin`, `cos` 함수를 이용해 `e.x += sin(t)*속도`
* 추적형 적: 플레이어 위치를 따라가는 간단한 `homing` 로직

**③ 공격 AI**

* 적 총알 발사 기능(`enemyBullets` 배열) 추가

  * 일정 프레임마다 플레이어 방향으로 발사
  * 보스는 확산탄, 회전탄, 유도탄 가능

---

## 💥 3. 아이템 및 강화 시스템

**① 아이템 종류**

* 🔫 **공격속도 증가**: `fireRate` 단축
* 💥 **다중탄**: `bulletCount` 증가
* ❤️ **체력 회복**: HP + 일정량
* 🛡 **보호막**: 일정시간 데미지 무효
* ⭐ **점수 아이템**: 점수 가산

**② 아이템 드랍 로직**

* 적 파괴 시 일정 확률(`dropRate`)로 아이템 객체 생성
* 플레이어 충돌 시 효과 즉시 적용 후 제거
* 일정시간 지나면 사라짐(`lifetime`)

**③ 아이템 효과 지속/해제 관리**

* 버프 지속시간(`buffDuration`) 관리
  예: 공격속도 증가 5초
  `setTimeout()` 또는 프레임 카운터로 해제

---

## 💣 4. 스테이지 / 난이도 시스템

**① 스테이지 구분**

* 일정 점수, 적 처치 수, 시간 기준으로 다음 스테이지 진입
* 각 스테이지별로

  * 적 등장 패턴
  * 이동속도
  * 스폰 간격
  * 배경음
    등을 다르게 설정

**② 난이도 곡선**

* `difficulty` 변수로 관리
  → 적 속도, 체력, 스폰 주기 자동 조정
  예: `enemySpeed = baseSpeed + difficulty * 0.3`

---

## 🔊 5. 사운드 및 피드백 시스템

**① 효과음 (event별)**

* `shoot.mp3`, `explosion.mp3`, `itemGet.mp3` 등
* `new Audio().play()` 방식으로 간단히 추가

**② 배경음악 (BGM)**

* 스테이지별 테마 재생, 보스전 시 교체

**③ 시각 피드백**

* 폭발 애니메이션 (canvas particle)
* 피격 시 화면 흔들림(Screen shake)

---

## 🧠 6. 게임 상태 관리

**① 상태 구분**

* `"start"`, `"playing"`, `"paused"`, `"gameOver"`
* 스페이스/마우스로 시작 및 재시작 가능

**② 일시정지 기능**

* `Escape` 또는 `P` 키로 일시정지/재개
* `requestAnimationFrame` 중단 및 HUD 표시

**③ 점수 및 랭킹**

* 점수 저장 (LocalStorage)
* 최고 점수 표기, 게임 종료 후 리더보드 표시

---

## 📱 7. 입력 및 플랫폼 확장(향후 개선사항)

**① 모바일 조작 대응**

* `touchmove`로 좌우 이동
* `touchstart`로 발사
* 버튼 UI 추가 가능 (Canvas 오버레이 방식)

**② 키보드 입력 고도화**

* `Shift`로 스킬 발동 (폭탄 등)
* `Ctrl`로 특수탄 전환

---

